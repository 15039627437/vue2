"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[130],{1130:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var l=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",[t("h4",[e._v("用户管理")])]),t("el-main",{staticStyle:{height:"100%"}},[t("div",{staticClass:"main-head"},[t("div",{staticClass:"main-content"},[t("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.show()}}},[e._v("新建")]),t("el-input",{attrs:{placeholder:"请输入关键字",clearable:""},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})],1),t("el-button",{attrs:{type:"success"}},[e._v("撤销")])],1),t("el-dialog",{staticClass:"formInput",attrs:{title:"新建/编辑",visible:e.dialogFormVisible},on:{close:function(t){e.dialogFormVisible=!1}}},[t("user-admin-dialog",{attrs:{form2:e.form,number:"你"},on:{show:e.show,add:e.add}})],1),t("user-admin-table",{ref:"table",attrs:{tableLabel:e.tableLabel,tableData:e.tableData},on:{tabDelete:e.tabDelete,tabUpdate:e.tabUpdate}}),t("div",{staticStyle:{display:"flex","padding-left":"40px","padding-top":"40px"}},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteLsit()}}},[e._v("删除")])],1)],1)],1)},s=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user_admin_dialog"},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"名字","label-width":e.formLabelWidth,size:"60px"}},[t("el-input",{attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:" form.name "}})],1),t("el-form-item",{attrs:{label:"年龄",prop:"age","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"text",size:"small",autocomplete:"off"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",e._n(t))},expression:"form.age"}})],1),t("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:"性别","label-width":e.formLabelWidth}},[t("el-cascader",{attrs:{options:e.sexList,size:"small"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}})],1),t("el-form-item",{attrs:{label:"电话","label-width":e.formLabelWidth,prop:"phone"}},[t("el-input",{attrs:{type:"text",size:"small",autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",e._n(t))},expression:"form.phone"}})],1),t("el-form-item",{staticClass:"box",attrs:{label:"地址","label-width":e.formLabelWidth}},[t("el-cascader",{attrs:{options:e.options,clearable:"",size:"small"},model:{value:e.form.address2.city,callback:function(t){e.$set(e.form.address2,"city",t)},expression:"form.address2.city"}}),t("el-input",{attrs:{type:"text",size:"small",clearable:""},model:{value:e.form.address2.street,callback:function(t){e.$set(e.form.address2,"street",t)},expression:"form.address2.street"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.isShow}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("确 定")])],1)],1)},r=[],o={props:{form2:{type:Object}},watch:{form2:{inheritAttrs:!0,handler:function(e){this.form=e}}},name:"UserAdminDialog",data(){return{form:{address2:{city:"",street:""}},formLabelWidth:"120px",options:[{label:"广东省",value:"广东省",children:[{label:"广州市",value:"广州市",children:[{label:"白云区",value:"白云区"},{label:"番禺区",value:"番禺区"},{label:"天河区",value:"天河区"}]},{label:"佛山市",value:"佛山市"}]}],sexList:[{label:"男",value:"男"},{label:"女",value:"女"}],is:!1}},created(){this.form=this.form2},methods:{isShow(){this.$emit("show")},add(){let e=this.form;Object.assign(e,{id:(new Date).valueOf()}),e.address=e.address2.city.join("")+e.address2.street,e.sex=e.sex[0],this.$nextTick((()=>{this.$emit("add",e)}))}}},n=o,d=a(1001),m=(0,d.Z)(n,i,r,!1,null,null,null),b=m.exports,c=function(){var e=this,t=e._self._c;return t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableLabel,(function(e){return t("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label}})})),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])})],2)},h=[],u={name:"UserAdminTable",props:{tableLabel:{type:Array,default:()=>[]},tableData:{type:Array,default:()=>[]}},data(){return{list:[]}},methods:{handleDelete(e){this.$emit("tabDelete",e)},handleEdit(e){this.$emit("tabUpdate",e)},handleSelectionChange(e){let t=[];e&&e.map((e=>{t.push(e.id)})),this.list=t}}},f=u,p=(0,d.Z)(f,c,h,!1,null,"1eea4353",null),g=p.exports,v={components:{UserAdminDialog:b,UserAdminTable:g},data(){return{val:"",form2:{name:"",age:"",sex:"",phone:"",address:"",address2:{city:"",street:""}},form:{name:"",age:"",sex:"",phone:"",address:"",address2:{city:"",street:""}},dialogFormVisible:!1,tableLabel:[{prop:"name",label:"名字",width:100},{prop:"age",label:"年龄",width:100},{prop:"sex",label:"性别",width:80},{prop:"phone",label:"联系电话",width:100},{prop:"address",label:"地址",width:100}],operateForm:{name:"",age:"",sex:"",phone:"",address:""},tableData:null}},created(){let e=localStorage.getItem("tableData");e?(this.tableData=JSON.parse(e),this.tableData2=JSON.parse(e)):(this.tableData=[{id:"1",name:"王小红",age:"1238525",sex:"女",phone:"1238525125",address:"广东省广州市白云区erw",address2:{city:["广东省","广州市","白云区"],street:"erw"}},{id:"2",name:"王小虎",age:"20",sex:"男",phone:"1238525",address:"广东省广州市白云区er",address2:{city:["广东省","广州市","白云区"],street:"er"}}],this.tableData2=this.tableData)},methods:{tabDelete(e){console.log(e),this.tableData=this.tableData.filter(((t,a)=>a!==e)),localStorage.setItem("tableData",JSON.stringify(this.tableData)),this.$message.error({message:"删除成功",duration:1e3})},tabUpdate(e){e.sex="男"==e.sex?["男"]:["女"],this.form=e,this.dialogFormVisible=!0},add(e){let t=this.tableData.map((e=>e.id));t.indexOf(e.id)>-1?(this.tableData[t.indexOf(e.id)]=e,this.$message.success({message:"修改成功",duration:1e3})):(this.tableData.push(e),this.$message.success({message:"添加成功",duration:1e3})),this.show(),localStorage.setItem("tableData",JSON.stringify(this.tableData))},show(){this.form=this.form2,this.dialogFormVisible=!this.dialogFormVisible},deleteLsit(){let e=this.$refs.table.list;e.length?(this.tableData=this.tableData.filter((t=>e.includes(t.id)?"":t)),localStorage.setItem("tableData",JSON.stringify(this.tableData)),this.$refs.table.list=[],this.$message.error({message:"删除成功",duration:1e3})):this.$message.error({message:"请选择要删除的用户信息",duration:1e3})}},watch:{val(e){if(!e)return void(this.tableData=this.tableData2);let t=new RegExp(e,"g"),a=[];this.tableData.map((e=>{t.test(e.name)&&a.push(e)})),this.tableData=a}}},x=v,D=(0,d.Z)(x,l,s,!1,null,"4986e346",null),y=D.exports}}]);
//# sourceMappingURL=130.54dcc8b4.js.map